# Schema Generation

This folder contains auto-generated file based on an xsd file from the GEOS repository.

We should not modify manually these files.

## Context

Input files from GEOS are described as an xml which follow a specific schema. To be able
to parse, serialize and deserialize these files in trame with `trame-simput`, we need to
generate a serializable class for each balise described in the schema used by GEOS.

For that we use a python module named `xsd-pydantic` which allows us to generate a file.
It will contain all class for a given xsd schema file. 

When starting the trame application, we can instantiate the expected dataclass when parsing
the input file.

## How to generate a new file

#### 1. Clone the GEOS Repository

```bash
git clone git@github.com:GEOS-DEV/GEOS.git
```

#### 2. Create a dedicate venv

```bash
cd <path-to-geos-trame>
python -m venv pydantic-venv
source pydantic-venv/bin/activate
pip install -e .
pip install "xsdata[cli]"
cd src/geos_trame/schema_generated
```

#### 3. Generate the new file

The full documentation is [here](https://xsdata-pydantic.readthedocs.io/en/latest/codegen/).

```bash
xsdata <path-to-GEOS>/src/coreComponents/schema/schema.xsd --output pydantic --package generated_models --structure-style single-package --include-header
```

Then update the generated file, at the beginning, by adding the geos commit used:

For example:

```py
"""This file was generated by xsdata, v24.6.1, on 2024-11-29

Generator: PydanticGenerator
See: https://xsdata.readthedocs.io/

GEOS commit hash: <add-the-commit-hash-here>
"""
```

