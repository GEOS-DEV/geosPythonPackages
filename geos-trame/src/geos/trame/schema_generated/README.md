# Schema Generation

This folder contains auto-generated file based on an xsd file from the GEOS repository.

We should not modify manually these files.

## Context

Input files from GEOS are described as an xml which follow a specific schema. To be able
to parse, serialize and deserialize these files in trame with `trame-simput`, we need to
generate a serializable class for each balise described in the schema used by GEOS.

For that we use a python module named `xsd-pydantic` which allows us to generate a file.
It will contain all class for a given xsd schema file. 

When starting the trame application, we can instantiate the expected dataclass when parsing
the input file.

## How to generate a new file

#### 1. Clone the GEOS Repository

```bash
git clone git@github.com:GEOS-DEV/GEOS.git
```

#### 2. Create a dedicate venv

```bash
cd <path-to-geos-trame>
python -m venv pydantic-venv
source pydantic-venv/bin/activate
pip install -e .
cd src/geos/trame/schema_generated
```

#### 3. Generate the new file

The full documentation is [here](https://xsdata-pydantic.readthedocs.io/en/latest/codegen/).

```bash
xsdata generate <path-to-GEOS>/src/coreComponents/schema/schema.xsd --structure-style single-package --include-header
```

The generated file will not satisfy the ruff config file used by this repository, as it's a generated file, add at the top of the file this: `# ruff: noqa`, to ignore ruff.

Rename the `generate.py` file to `schema_mod.py`.

Add the GEOS commit used to generate this file:

```py
"""This file was generated by xsdata, v24.4, on 2024-04-23 11:59:25

Generator: PydanticGenerator
See: https://xsdata.readthedocs.io/

GEOS commit sha: 26e7c0ab2b2c3d3d9d82629bddcf394a318df187
"""
```
